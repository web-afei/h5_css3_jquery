(function(e){e.fn.Card3D=function(t){function d(e){if(s){m(e.data.target)}else{b(true)}}function m(t){E();var n=t;var u=n.width();var a=n.height();w(n);v=e(n.data("caption"));o=n.css({"z-index":1001}).addClass("animated normal_card");if(e.browser.msie&&parseInt(e.browser.version,10)<=9){u=t.data("size").w;a=t.data("size").h;o.animate({width:u,height:a,top:r.ieTop,left:r.ieLeft},300)}i.data("prevCard",o);v=e(n.data("caption")).css({position:"absolute",opacity:0,left:v.data("left"),top:v.data("top")}).show().delay(500).animate({opacity:1},300,function(){if(r.slideshow&&i.is(":visible")&&x){T()}});s=s==true?false:true}function b(t){g=true;t=typeof t!=="undefined"?t:false;e(r.imageContainer,i).each(function(t){e(this).stop(true,true).animate({opacity:1},300)});o=i.data("prevCard");if(o){o.removeClass("normal_card").addClass("animated tilt_card").css("z-index",100);p=o.data("rel");i.data("prevCard",o);if(e.browser.msie&&parseInt(e.browser.version,10)<=9){var n=o.width();var u=o.height();var a=o.data("size").x;var f=o.data("size").y;o.css({width:n*r.ieScale,height:u*r.ieScale,left:a,top:f}).data("size",{w:n,h:u,x:a,y:f})}}if(v)v.animate({opacity:0},300,function(){e(this).hide();if(r.click2next&&t||x){var n=p;n++;if(n>h.length-1)n=0;m(h[n])}});s=s==true?false:true}function w(t){e(r.imageContainer,i).each(function(n){e(this).animate({opacity:r.outFocusOpacity},400);t.stop(true,true).animate({opacity:1},300)})}function E(){clearInterval(S);i.data("interval",S)}function T(){clearInterval(i.data("interval"));S=setInterval(function(){b()},r.slideShowDelay);i.data("interval",S)}var n=this;var r=e.extend({xPadding:220,yPadding:160,columns:4,imageContainer:".image-container",click2next:false,slideshow:false,slideShowDelay:4e3,outFocusOpacity:.2,ieScale:.4,ieTop:20,ieLeft:240,ieXPadding:220,ieYPadding:240},t);var i=this;var s=true;var o;var u=r.columns||4;var a=0;var f=0;var l=220;var c=160;var h=[];var p=0;e(r.imageContainer,i).each(function(t){h[t]=e(this);e(this).data("rel",t).css({position:"absolute",top:c*f,left:l*a});if(e.browser.msie&&parseInt(e.browser.version,10)<=9){var n=e(this).width();var i=e(this).height();e(this).addClass("ie-fix").css({width:n*r.ieScale,height:i*r.ieScale,top:r.ieYPadding*f,left:r.ieXPadding*a});var s=e(this).css("left");var o=e(this).css("top");e(this).data("size",{w:n,h:i,x:s,y:o})}if(a+1<u){a++}else{a=0;f++}e(this).on("click",{target:e(this)},d)});var v;var g=true;var y;i.on("mouseover",function(e){x=false}).on("mouseleave",function(e){if(r.slideshow){x=r.slideshow;T()}});var S;var x=r.slideshow;return this}})(jQuery)
